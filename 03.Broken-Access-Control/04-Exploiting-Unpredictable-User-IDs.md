# 04: Exploiting Unpredictable User IDs

As we've said, Broken Access Control is when a user can access or modify another user's info. This often means finding sensitive information.

> As I already said a key testing method is to **use two accounts**: one as the attacker and one as the target. You put sensitive info on the target account and try to access it as the attacker.

---

## Lab: Accessing User Data via Unpredictable IDs

In this lab, we will see another type of Broken Access Control. We can't create two accounts, but they give us credentials for **wiener**, and our goal is to get data from **carlos**.

* **Lab:** [User ID controlled by request parameter with unpredictable user IDs](https://portswigger.net/web-security/access-control/lab-user-id-controlled-by-request-parameter-with-unpredictable-user-ids)

### Step 1: Reconnaissance
As usual, access the lab. I'll log in as **wiener**. On the home page, I can see a lot of articles, and they show the name of the writer (e.g., **carlos**).

* If I click the article itself, I don't see anything private.
* However, if I click on the **author's name** (like **carlos**) to see their author profile, I see something very interesting in the URL.

### Step 2: Finding the Vulnerability (The Leak)
When I click on the writer's account, the URL in my browser looks something like this:

*.../blogs?userid=a1b2-c3d4-e5f6-g7h8*

This *userid* is the user ID for *carlos*, and it's not guessable (it's a long, random string, sometimes called a GUID). This is an information leak. I will **copy this ID**.

### Step 3: Exploitation
Now that I have the "unpredictable" ID for carlos, I need to find where to use it.

1.  I'll go to my *own* account page by clicking "My account."
2.  I look at the URL for my *own* page, and it shows my ID:
    .../my-account?userid=z9y8-x7w6-v5u4-t3s2
3.  This is the vulnerability. The application is using my **id** from the URL to show my account details.
4.  I will now **replace my user ID** in the URL with the **writer_id for carlos** that I copied in Step 2.

The new URL will look like:
.../my-account?userid=a1b2-c3d4-e5f6-g7h8*

### Step 4: Solving the Lab
Success! It works. The page now shows all of Carlos's account details, including his API key.

To solve the lab, just follow these steps, read the instructions, and submit the API key you found.
